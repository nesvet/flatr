# ğŸ¥ fln

[![CI](https://github.com/nesvet/fln/actions/workflows/ci.yaml/badge.svg)](https://github.com/nesvet/fln/actions/workflows/ci.yaml)
[![npm](https://img.shields.io/npm/v/fln)](https://www.npmjs.com/package/fln)
[![license](https://img.shields.io/npm/l/fln)](LICENSE)

**Your entire codebase â†’ One AI-ready file.**

Stop wrestling with file pickers and attachment limits â€” feed your whole project to any LLM in one shot.

```bash
fln .
```

Or run instantly:

```bash
npx fln . -o codebase.md
```

Works with **Claude**, **ChatGPT**, **Gemini**, **Grok**, **Cursor**, **Copilot**, and any AI tool.

## Why fln exists

If you use LLMs for real projects, youâ€™ve hit these limits:

- **Context windows** â€” large projects donâ€™t fit
- **Upload friction** â€” dozens of files, every session
- **Partial understanding** â€” AI sees fragments, not architecture
- **Manual prep** â€” repeating the same setup again and again

**fln removes that overhead.**  
It turns your project into a single, structured snapshot that LLMs can actually reason about.

## What fln enables

**â†’ Full-context refactoring**  
Ask architectural questions that are impossible file-by-file:
> â€œWhere is the real coupling here?â€  
> â€œWhat should be split into modules?â€  

**â†’ Instant onboarding**  
One markdown file instead of â€œstart by opening these 12 foldersâ€.

**â†’ Project-level code reviews**  
Let AI detect patterns, inconsistencies, and risks across the entire codebase.

**â†’ Reliable documentation snapshots**  
Generate auditable, deterministic snapshots for docs, reviews, or CI.

**â†’ LLM-friendly diffs**  
Flatten â†’ commit â†’ flatten again. See how the *whole project* changed.

## Compatible with your AI workflow

- **Claude** â€” ideal for large architectural prompts (200K+ tokens)
- **Gemini** â€” push massive codebases into 1M token windows
- **ChatGPT** â€” single-shot analysis without attachments
- **Cursor / Windsurf** â€” reference the full project in prompts
- **GitHub Copilot** â€” better context â†’ better suggestions
- **Local LLMs** â€” datasets for RAG and fine-tuning

## Built for real projects

- âš¡ **Fast parallel scanning** â€” thousands of files in seconds
- ğŸ¯ **Smart filtering** â€” respects `.gitignore`, excludes binaries, configurable size limits
- ğŸ“ **Intentional file order** â€” entry points and configs first, not alphabetical noise
- ğŸ”„ **Auto-detection** â€” skips files previously generated by fln
- ğŸ“ **Deterministic output** â€” same input â†’ same snapshot
- ğŸ§  **Project metadata detection** â€” name & version from ecosystem-native manifests
- ğŸ› ï¸ **Developer-friendly** â€” Markdown for humans, JSON for tooling, dry-run mode for safety
- ğŸ”’ **No surprises** â€” runs locally, no data leaves your machine

Zero dependencies on external services. Zero tracking. Just a tool that does its job.

## Install

```bash
# npm
npm install -g fln

# one-liner (macOS/Linux)
curl -fsSL "https://raw.githubusercontent.com/nesvet/fln/main/install.sh" | sh

# one-liner (Windows)
irm "https://raw.githubusercontent.com/nesvet/fln/main/install.ps1" | iex

# or just run without installing
npx fln . -o codebase.md
```

<details>
<summary>More installation options</summary>

### One-line installer options (macOS/Linux)

Pin a version or custom install directory:

```bash
curl -fsSL "https://raw.githubusercontent.com/nesvet/fln/main/install.sh" | FLN_VERSION="<version>" INSTALL_DIR="$HOME/.local/bin" sh
```

### One-line installer options (Windows PowerShell)

```powershell
$env:FLN_VERSION = "<version>"
$env:INSTALL_DIR = "$env:LOCALAPPDATA\\fln\\bin"
irm "https://raw.githubusercontent.com/nesvet/fln/main/install.ps1" | iex
```

### Manual download (GitHub Releases)

```bash
curl -L "https://github.com/nesvet/fln/releases/latest/download/fln-macos-x64.tar.gz" | tar -xz -C /usr/local/bin
chmod +x /usr/local/bin/fln
fln --help
```

</details>

## Usage

```bash
fln [directory] [options]
```

Examples:

```bash
# Flatten entire project
fln .

# Exclude tests and fixtures
fln src -e "**/*.test.ts" -e "fixtures/"

# Force include a file (even if ignored)
fln . -i "dist/output.md"

# Generate JSON for tooling
fln . --no-contents --format json

# Preview without writing
fln . --dry-run
```

<details>
<summary>All CLI options</summary>

- `-o, --output <path>` Output file or directory
- `-e, --exclude <glob>` Exclude patterns (repeatable)
- `-i, --include <glob>` Force include patterns
- `--include-hidden` Include hidden files and directories
- `--no-gitignore` Ignore `.gitignore`
- `--max-size <size>` Max file size (`10mb`, `512kb`)
- `--max-total-size <size>` Max total included size
- `--no-contents` Exclude file contents
- `--no-tree` Exclude directory tree
- `--format <md|json>` Output format
- `--dry-run` Scan without writing output
- `--follow-symlinks` Follow symlinks
- `--no-ansi` Disable ANSI colors
- `--no-sponsor-message` Hide support message (also: `FLN_NO_SPONSOR=1`)
- `--generated-date <date>` Use this date in the "Generated" header (format: `YYYY-MM-DD HH:mm`)
- `--banner <text>` Add text at the beginning
- `--footer <text>` Add text at the end of the output
- `-q, --quiet` Minimal output
- `-V, --verbose` Verbose output with breakdown
- `--debug` Debug output with file list
- `-v, --version` Show version
- `-h, --help` Show help

</details>

## JavaScript API

```typescript
import { fln } from "fln";

const result = await fln({
  rootDirectory: "./src",
  outputFile: "output.md",
  excludePatterns: [ "*.test.ts", "fixtures/" ],
  format: "md",
  onProgress: (current, total) => {
    console.log(`Progress: ${current}/${total}`);
  }
});

console.log(`Processed ${result.files} files`);
console.log(`Output: ${result.outputPath}`);
console.log(`Tokens: ${result.outputTokenCount}`);
```

All CLI options are available via `FlnOptions`.


## Advanced

<details>
<summary>Configuration file (.fln.json)</summary>

```json
{
	"outputFile": "output.md",
	"excludePatterns": [
		"dist/",
		"**/*.snap"
	],
	"includePatterns": [],
	"includeHidden": false,
	"useGitignore": true,
	"maximumFileSizeBytes": "10mb",
	"maximumTotalSizeBytes": "0",
	"includeTree": true,
	"includeContents": true,
	"format": "md",
	"followSymlinks": false,
	"logLevel": "normal",
	"generatedDate": "2026-02-09 12:00",
	"banner": "This is a snapshot of the codebase.",
	"footer": "End of snapshot."
}
```

</details>

<details>
<summary>Output naming & formats</summary>

- Uses project name + version if available (`package.json`, `pyproject.toml`, `Cargo.toml`, `vcpkg.json`, `go.mod`, or `CMakeLists.txt`)  
- `md` includes tree + contents
- `json` includes `rootDirectory`, `tree`, `stats`

</details>

<details>
<summary>Runtime compatibility</summary>

**Node.js**
- Requires Node.js `>=18.3`
- ESM-only package (`"type": "module"`)
- CLI works via `npm i -g fln` or `npx fln`

**Bun**
- Requires Bun `>=1.0.0`
- CLI works via `bun install -g fln` or `bunx fln`

</details>

## Preview

````md
<!-- ğŸ¥ fln 1.0.0 -->

# Codebase Snapshot: my-app

Generated: 2026-02-03 09:41  
Files: 42 | Directories: 8

---

## Directory Tree
```text
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ cli/
â”‚   â”‚   â””â”€â”€ main.ts
â”‚   â””â”€â”€ core/
â”‚       â””â”€â”€ scanTree.ts
â€¦
```

---

## Source Files

### src/core/scanTree.ts
```ts
export function scanTree(â€¦) {
	// â€¦
}
```
â€¦
````

## Support this project

**fln is free, open-source, and maintained by one developer.**

If it saves you time or improves your AI workflow:
- â­ï¸ Star the repo â€” it genuinely helps discoverability
- ğŸ’™ Support on [Patreon](https://www.patreon.com/nesvet) â€” priority features & long-term maintenance

## Contributing

PRs and issues are welcome.  
See [CONTRIBUTING.md](CONTRIBUTING.md) for setup and guidelines.

## License

MIT
